{% load static %}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static '/css/style.css' %}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <title>Gestão Operacional</title>
</head>
<body>
    <header>
        <img src="{% static '/img/ambipar_response.png' %}" alt="logo_grupo" id="logo_grupo">
            <div id="logout">
                <abbr title="Sair"><img src="{% static '/img/logout.png'%}" alt="logout"></abbr>
            </div>
    </header>

    <main>
        <aside>
            <div class="nova_os">
                <h1>Controle Operacional</h1>
                <div id="btn_right">
                    <button class="btn_os" id="btn_nova_os">Abrir nova OS</button>
                        <div class="escolher_os" id="radio_os">
                            <input name="radio" type="radio" class="escolha_os"> Nova OS
                            <input name="radio" type="radio" class="escolha_os"> OS Existente
                        </div>
            <section>
                <div id="modal-os" class="modal">
                    <div class="modal-content">
                        <span class="close-btn" onclick="fecharModal()">&times;</span>
                        <h2>Abrir OS<span id="modal-os"></span></h2>
                        <form id="form-os" method="post" action="{% url 'lista_servicos' %}" enctype="multipart/form-data">
                            {% csrf_token %}
                            <input type="hidden" name="criar_os" id="input-os" />
                            <fieldset class="form-section">
                                <legend>Cliente</legend>
                                <div class="campo-preenchimento">
                                    <label for="{{form.cliente.id_for_label}}">Cliente:</label>
                                    {{ form.cliente }}
                                </div>
                                <div class="campo-preenchimento">
                                    <label for="{{form.unidade.id_for_label}}">Unidade/Embarcação</label>
                                    {{ form.unidade }}
                                </div>
                                <div class="campo-preenchimento">
                                    <label for="{{form.solicitante.id_for_label}}">Solicitante</label>
                                </div>
                                {{ form.solicitante }}
                            </fieldset>
                
                            <fieldset class="form-section">
                                <legend>Operação</legend>
                                <div class="campo-preenchimento">
                                    <label for="{{ form.servico.id_for_label }}">Serviço</label>
                                    {{ form.servico }}
                                </div>
                                <div class="campo-preenchimento">
                                    <label for="{{ form.metodo.id_for_label }}">Método:</label>
                                    {{ form.metodo }}
                                </div>
                                <div class="campo-preenchimento">
                                    <label for="{{ form.tanque.id_for_label }}">Tanque:</label>
                                    {{ form.tanque }}
                                </div>
                                <div class="campo-preenchimento">
                                    <label for="{{ form.volume_tanque.id_for_label }}">Volume do Tanque:</label>
                                    {{ form.volume }}
                                </div>
                                <div class="campo-preenchimento">
                                    <label for="{{ form.especificacao.id_for_label }}">Especificação:</label>
                                    {{ form.especificacao }}
                                </div>
                                <div class="campo-preenchimento">
                                    <label for="{{ form.tipo_operacao.id_for_label }}">Regime de Operação:</label>
                                    {{ form.tipo_operacao }}
                                </div>
                            </fieldset>
                            <fieldset class="form-section">
                                <legend>Data</legend>
                                <div class="campo-preenchimento">
                                    <label for="{{ form.data_inicio }}">Data Início</label>
                                    {{ form.data_inicio }}
                                </div>
                                <div class="campo-preenchimento">
                                    <label for="{{ form.data_fim }}">Data Fim:</label>
                                    {{ form.data_fim }}
                                </div>
                            </fieldset>
                            <fieldset class="form-section">
                                <legend>Equipe</legend>
                                <div class="campo-preenchimento">
                                    <label for="{{ form.pob.id_for_label }}">POB:</label>
                                    {{ form.pob }}
                                </div>
                                <div class="campo-preenchimento">
                                    <label for="{{ form.coordenador.id_for_label }}">Coordenador:</label>
                                    {{ form.coordenador }}
                                </div>
                                <div class="campo-preenchimento">
                                    <label for="{{ form.supervisor.id_for_label }}">Supervisor</label>
                                    {{ form.supervisor }}
                                </div>
                            </fieldset>
                
                            <fieldset class="form-section">
                                <legend>Documentos e Links</legend>
                                <div class="campo-preenchimento">
                                    <label for="{{ form.link_rdo.id_for_label }}">Controle de RDO:</label>
                                    {{ form.link_rdo }}
                                </div>
                            </fieldset>
                            <div class="botoes-modal">
                                <button type="submit" class="btn-confirmar">Confirmar</button>
                                <button type="button" class="btn-cancelar" onclick="fecharModal()">Cancelar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
        </aside>

        <aside>
            <div class="pesquisa_os">
                <form method="get" id="pesquisa">
                    <i class="fas fa-filter"></i>
                    <div class="icone-filtro-css"></div>
                    <input type="text" name="pesquisar_os" placeholder="Pesquisar OS" class="pesquisar_os">
                    <div class="dropdown-filtro" id="dropdown-filtro">
                        <div class="opcao-filtro" data-status="Programada">Programada</div>
                        <div class="opcao-filtro" data-status="Em andamento">Em andamento</div>
                        <div class="opcao-filtro" data-status="Finalizada">Finalizada</div>
                    </div>
                </form>
            </div>
            <div class="tabela_conteiner">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nº OS</th>
                            <th>TAG</th>
                            <th>Código da OS</th>
                            <th>Data Início</th>
                            <th>Data Fim</th>
                            <th>Cliente</th>
                            <th>Unidade</th>
                            <th>Solicitante</th>
                            <th>Regime da Operação</th>
                            <th>Serviço</th>
                            <th>Tanque</th>
                            <th>Volume do Tanque</th>
                            <th>Especificação</th>
                            <th>Método da Operação</th>
                            <th>POB</th>
                            <th>Dias de Operação</th>
                            <th>Coordenador</th>
                            <th>Supervisor</th>
                            <th>Status da Operação</th>
                            <th>Visão geral</th>
                        </tr>
                    </thead>
                        <tbody>
                            {% for os in form %}
                            <tr>
                                <td>{{ os.id }}</td>
                                <td>{{ os.numero_os }}</td>
                                <td>{{ os.tag }}</td>
                                <td>{{ os.codigo_os }}</td>
                                <td>{{ os.data_inicio }}</td>
                                <td>{{ os.data_fim }}</td>
                                <td>{{ os.cliente }}</td>
                                <td>{{ os.unidade }}</td>
                                <td>{{ os.solicitante }}</td>
                                <td>{{ os.tipo_operacao }}</td>
                                <td>{{ os.servico }}</td>
                                <td>{{ os.tanque }}</td>
                                <td>{{ os.volume_tanque }}</td>
                                <td>{{ os.especificacao }}</td>
                                <td>{{ os.metodo }}</td>
                                <td>{{ os.pob }}</td>
                                <td>{{ os.dias_de_operacao }}</td>
                                <td>{{ os.coordenador }}</td>
                                <td>{{ os.supervisor }}</td>
                                <td>{{ os.status_operacao }}</td>
                                <td>
                                    <button class="btn_tabela" data-id="{{ os.id }}">Ver Mais</button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>

                </table>
            </div>
            <div class="botoes_tabela">
                <button class="btn_os" id="exportar_excel">Exportar para Excel</button>
            </div>
        </aside>

        <aside>
            <div id="detalhes_os" class="detalhes">
                <div class="modal-detalhes">
                    <div id="relatorio-os">
                        <span class="close-btn" onclick="fecharDetalhesModal()">&times;</span>
                        <h2>Relatório de Ordem de Serviço</h2>
                        <div class="secao">
                            <h3>Informações Gerais</h3>
                            <div class="grid-detalhes">
                                <div><strong>Número da OS:</strong> <span id="num_os"></span></div>
                                <div><strong>TAG:</strong> <span id="tag"></span></div>
                                <div><strong>Código da OS:</strong> <span id="cod_os"></span></div>
                                <div><strong>ID:</strong> <span id="id_os"></span></div>
                                <div><strong>Status da operação:</strong> <span id="status_os"></span></div>
                            </div>
                        </div>
                        <div class="secao">
                            <h3>Datas</h3>
                            <div class="grid-detalhes">
                                <div><strong>Data Início:</strong> <span id="data_inicio"></span></div>
                                <div><strong>Data Fim:</strong> <span id="data_fim"></span></div>
                                <div><strong>Dias de operação:</strong> <span id="dias_op"></span></div>
                            </div>
                        </div>
                        <div class="secao">
                            <h3>Cliente e Local</h3>
                            <div class="grid-detalhes">
                                <div><strong>Cliente:</strong> <span id="cliente"></span></div>
                                <div><strong>Unidade:</strong> <span id="unidade"></span></div>
                                <div><strong>Solicitante:</strong> <span id="solicitante"></span></div>
                            </div>
                        </div>
                        <div class="secao">
                            <h3>Serviço e Operação</h3>
                            <div class="grid-detalhes">
                                <div><strong>Regime da Operação:</strong> <span id="regime"></span></div>
                                <div><strong>Serviço:</strong> <span id="servico"></span></div>
                                <div><strong>Método da operação:</strong> <span id="metodo"></span></div>
                            </div>
                        </div>
                        <div class="secao">
                            <h3>Tanque</h3>
                            <div class="grid-detalhes">
                                <div><strong>Tanque:</strong> <span id="tanque"></span></div>
                                <div><strong>Volume do Tanque:</strong> <span id="volume_tq"></span></div>
                                <div><strong>Especificação:</strong> <span id="especificacao"></span></div>
                            </div>
                        </div>
                        <div class="secao">
                            <h3>Equipe</h3>
                            <div class="grid-detalhes">
                                <div><strong>POB:</strong> <span id="pob"></span></div>
                                <div><strong>Coordenador:</strong> <span id="coordenador"></span></div>
                                <div><strong>Supervisor:</strong> <span id="supervisor"></span></div>
                            </div>
                        </div>
                        <div class="secao">
                            <h3>Observações</h3>
                            <div class="observacao">
                                <p id="observacao_texto">Nenhuma observação registrada.</p>
                            </div>
                        </div>
                        <div class="secao">
                            <h3>Arquivos Anexados</h3>
                            <ul class="anexos">
                                <li><a href="#">Controle de RDO</a></li>
                                <li><a href="#">Controle de Logística de Pessoal</a></li>
                                <li><a href="#">Controle de materiais/equipamento</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </main>
    <footer>
        <p>© 2025 Ambipar. Versão 1.0</p>
    </footer>
      <script src="{% static 'js/scripts.js'%}"></script>
</body>
</html>